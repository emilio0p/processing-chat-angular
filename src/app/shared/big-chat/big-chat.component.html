<div class="loading-big-chat">
  <div class="loading-indicator" *ngIf="!chat || !usuarioHost">
    <div class="spinner-border text-success cargador" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <!-- VISTA CLIENTES -->
  <div class="big-chat" *ngIf="chat && usuarioHost && usuarioHost.user_rol.rol_name==='user'">
    <div class="chat-header bg-light p-3 border-bottom">
      <div class="d-flex align-items-center">
        <img src="foto" class="rounded-circle mr-3" alt="usuario">
        <h5 class="mb-0">{{chat.chat_user_admin.username}}</h5>
        <button class="btn btn-sm btn-primary ml-auto" (click)="toogleForm()" *ngIf="chat.status_id===1">Formulario</button>
      </div>
      <h6 class="mt-3 mb-0">{{chat.chat_form_type.form_name}}</h6>
    </div>

    <div class="chat-history overflow-auto" id="chatHistory">
      <div class="d-flex mb-3">
        <div class="flex-grow-1">
          <app-chat-message *ngFor="let mensaje of mensajes" [message]="mensaje.content" [isHost]="mensaje.user_id === usuarioHost.user_id"></app-chat-message>
        </div>
      </div>
    </div>

    <div class="chat-footer d-flex mt-3">
      <input type="text" class="form-control flex-grow-1" placeholder="Escribe tu mensaje" [(ngModel)]="nuevoMensaje">
      <button class="btn btn-primary" (click)="guardarMensaje()">Enviar</button>
    </div>
  </div>

  <!-- VISTA ADMIN -->
  <div class="big-chat" *ngIf="chat && usuarioHost && usuarioHost.user_rol.rol_name==='admin'">
    <div class="chat-header bg-light p-3 border-bottom">
      <div class="d-flex align-items-center">
        <img src="foto" class="rounded-circle mr-3" alt="usuario">
        <h5 class="mb-0">{{chat.chat_user_client.username}}</h5>
        <button class="btn btn-primary btn-sm" id="boton-estado" (click)="changeStatus()">Cambiar estado</button>
      </div>
      <h6 class="mt-3 mb-0">{{chat.chat_form_type.form_name}}</h6>
      <br>
      <h6 class="mt-3 mb-0">Entrega (aprox.): {{chat.delivery_date}}</h6>
    </div>

    <div class="chat-history overflow-auto" id="chatHistory">
      <div class="d-flex mb-3">
        <div class="flex-grow-1 historial">
          <app-chat-message *ngFor="let mensaje of mensajes" [message]="mensaje.content" [isHost]="mensaje.user_id === usuarioHost.user_id"></app-chat-message>
        </div>
      </div>
    </div>

    <div class="chat-footer d-flex mt-3">
      <input type="text" class="form-control flex-grow-1" placeholder="Escribe tu mensaje" [(ngModel)]="nuevoMensaje">
      <button class="btn btn-primary" (click)="guardarMensaje()">Enviar</button>
    </div>
  </div>
</div>
